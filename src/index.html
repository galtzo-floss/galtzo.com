---
layout: default
title: Open Source & Source Available Projects
permalink: /
body_class: projects
---
<% allowed_roles = %w(author maintainer contributor) %>

<% projects = site.data.projects %>

<%# Shared number formatter used by both card footer blocks below %>
<%# Rules for shortening:
    - Maximum 3 significant figures (e.g., 345k not 345.6k)
    - Maximum 1 digit after decimal point
    - Only numbers with letter abbreviations (B, M, k) can have decimals
    - Examples:
      * 345.6k => 345k (remove decimal to stay under 3 sig figs)
      * 22.5k => 22.5k (keep decimal, already 3 sig figs)
      * 548.2M => 548M (remove decimal to stay under 3 sig figs)
      * 22.4M => 22.4M (keep decimal, already 3 sig figs)
      * Numbers without abbreviations (< 1000) always show as-is (no decimals)
%>
<% fmt_num = ->(n) {
  return nil if n.nil?

  if n >= 1_000_000_000
    # Billions: divide by 1B
    scaled = n / 1_000_000_000.0
    # Format with 1 decimal, then remove trailing .0
    formatted = sprintf("%.1f", scaled).sub(/\.0$/, '')
    # If we have a decimal point and it results in > 3 sig figs, remove it
    formatted = formatted.sub(/\.\d$/, '') if formatted.include?('.') && formatted.gsub('.', '').length > 3
    "#{formatted}B"
  elsif n >= 1_000_000
    # Millions: divide by 1M
    scaled = n / 1_000_000.0
    formatted = sprintf("%.1f", scaled).sub(/\.0$/, '')
    formatted = formatted.sub(/\.\d$/, '') if formatted.include?('.') && formatted.gsub('.', '').length > 3
    "#{formatted}M"
  elsif n >= 1_000
    # Thousands: divide by 1k
    scaled = n / 1_000.0
    formatted = sprintf("%.1f", scaled).sub(/\.0$/, '')
    formatted = formatted.sub(/\.\d$/, '') if formatted.include?('.') && formatted.gsub('.', '').length > 3
    "#{formatted}k"
  else
    # No abbreviation: return as-is (no decimals for small numbers)
    n.to_s
  end
} %>

<% years = projects.map {|p| p['first_commit_by_person_on']&.to_s&.split('/')&.first }.compact.uniq.sort %>
<% year_counts = {} %>
<% projects.each do |project| %>
<% year = project['first_commit_by_person_on']&.to_s&.split('/')&.first %>
<% if year %>
<% year_counts[year] ||= 0 %>
<% year_counts[year] += 1 %>
<% end %>
<% end %>

<% tags = projects.flat_map { |project| project["tags"] || [] }.uniq.sort %>
<% tag_counts = {} %>
<% projects.each do |project| %>
<% (project["tags"] || []).each do |tag| %>
<% tag_counts[tag] ||= 0 %>
<% tag_counts[tag] += 1 %>
<% end %>
<% end %>

<% bash_projects = projects.select {|p| p["language"] == "Bash" } %>
<% min_bash_versions = bash_projects.flat_map { |project| project["minimum_version"] || [] }.uniq.sort %>
<% min_bash_counts = {} %>
<% bash_projects.each do |project| %>
<% if project["minimum_version"] %>
<% min_bash_counts[project["minimum_version"]] ||= 0 %>
<% min_bash_counts[project["minimum_version"]] += 1 %>
<% end %>
<% end %>

<% ts_projects = projects.select {|p| p["language"] == "TypeScript" } %>
<% min_ts_versions = ts_projects.flat_map { |project| project["minimum_version"] || [] }.uniq.sort %>
<% min_ts_counts = {} %>
<% ts_projects.each do |project| %>
<% if project["minimum_version"] %>
<% min_ts_counts[project["minimum_version"]] ||= 0 %>
<% min_ts_counts[project["minimum_version"]] += 1 %>
<% end %>
<% end %>

<% rb_projects = projects.select {|p| p["language"] == "Ruby" } %>
<% min_rb_versions = rb_projects.flat_map { |project| project["minimum_version"] || [] }.uniq.sort %>
<% min_rb_counts = {} %>
<% rb_projects.each do |project| %>
<% if project["minimum_version"] %>
<% min_rb_counts[project["minimum_version"]] ||= 0 %>
<% min_rb_counts[project["minimum_version"]] += 1 %>
<% end %>
<% end %>

<% go_projects = projects.select {|p| p["language"] == "Go" } %>
<% min_go_versions = go_projects.flat_map { |project| project["minimum_version"] || [] }.uniq.sort %>
<% min_go_counts = {} %>
<% go_projects.each do |project| %>
<% if project["minimum_version"] %>
<% min_go_counts[project["minimum_version"]] ||= 0 %>
<% min_go_counts[project["minimum_version"]] += 1 %>
<% end %>
<% end %>

<% rust_projects = projects.select {|p| p["language"] == "Rust" } %>
<% min_rust_versions = rust_projects.flat_map { |project| project["minimum_version"] || [] }.uniq.sort %>
<% min_rust_counts = {} %>
<% rust_projects.each do |project| %>
<% if project["minimum_version"] %>
<% min_rust_counts[project["minimum_version"]] ||= 0 %>
<% min_rust_counts[project["minimum_version"]] += 1 %>
<% end %>
<% end %>

<% lanugage_count = min_go_versions.count + min_rb_counts.count + min_ts_counts.count + min_bash_counts.count + min_rust_versions.count %>

<% role_counts = {} %>
<% projects.each do |project| %>
<% if project["role"] %>
<% role_counts[project["role"]] ||= 0 %>
<% role_counts[project["role"]] += 1 %>
<% end %>
<% end %>

<% adoptable_count = projects.count { |p| p["adoptable"] } %>
<% archived_count = projects.count { |p| p["status"] == "archived" } %>

<%# Calculate daily downloads for each role filter (exclusive: no project in multiple roles) %>
<% role_daily_downloads = {} %>
<% allowed_roles.each do |role| %>
<% role_projects = projects.select { |p| p["role"] == role } %>
<% role_daily_downloads[role] = role_projects.sum { |p| (p['daily_downloads'] || 0).to_i } %>
<% end %>

<%# Calculate daily downloads for adoptable and archived (excluding projects that are already counted in roles) %>
<% adoptable_projects = projects.select { |p| p["adoptable"] } %>
<% adoptable_daily_downloads = adoptable_projects.sum { |p| (p['daily_downloads'] || 0).to_i } %>

<% archived_projects = projects.select { |p| p["status"] == "archived" } %>
<% archived_daily_downloads = archived_projects.sum { |p| (p['daily_downloads'] || 0).to_i } %>

<h1>
  <span class="title-text"><%= (page.respond_to?(:data) && page.data["title"]) || "Open Source Projects" %> by Peter Boling</span>
</h1>

<h1>
  <span class="tag-list">
    <% allowed_roles.each do |role| %>
    <span>
      <button type="button" class="tag-link pill-outer role-link <%= role %>" data-tag="<%= role %>">
        <span class="count left"><%== role_counts[role].to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
        <span class="tag <%= role %>"><%= role %> <small><span class="stat-label">&nbsp;DL&nbsp;</span>~<%== fmt_num.call(role_daily_downloads[role]) %>&nbsp;/&nbsp;d</small></span>
        <span class="count right"><%== role_counts[role].to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
      </button>
    </span>
    <% end %>
    <span>
      <button type="button" class="tag-link pill-outer special-filter" data-tag="adoptable" data-special-filter="adoptable-family">
        <span class="count left"><%== adoptable_count.to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
        <span class="tag">üëÅÔ∏è Adoptable <small><span class="stat-label">&nbsp;DL&nbsp;</span>~<%== fmt_num.call(adoptable_daily_downloads) %>&nbsp;/&nbsp;d</small></span>
        <span class="count right"><%== adoptable_count.to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
      </button>
    </span>
    <span>
      <button type="button" class="tag-link pill-outer special-filter" data-tag="archived" data-special-filter="archived-family">
        <span class="count left"><%== archived_count.to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
        <span class="tag">üëÅÔ∏è Archived <small><span class="stat-label">&nbsp;DL&nbsp;</span>~<%== fmt_num.call(archived_daily_downloads) %>&nbsp;/&nbsp;d</small></span>
        <span class="count right"><%== archived_count.to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
      </button>
    </span>
  </span>
</h1>

<div class="filters">
  <details  id="year-filters">
    <summary>
      <span class="tag-list">
        <span class="tag-scroll">
          <span class="tag-link pill-outer summary-control">
             <span class="count left"><%== year_counts.length.to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
             <span class="tag">Filter by Start Year</span>
             <span class="count right"><%== year_counts.length.to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
          </span>
        </span>
      </span>
    </summary>

    <ul class="tag-list">
      <% years.each do |year| %>
      <li>
        <button type="button" class="tag-link pill-outer" data-tag="<%= year %>">
          <span class="count left"><%== year_counts[year].to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
          <span class="tag <%= year %>"><%= year %></span>
          <span class="count right"><%== year_counts[year].to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
        </button>
      </li>
      <% end %>
    </ul>
  </details>

  <details id="tag-filters">
    <summary>
      <span class="tag-list">
        <span class="tag-scroll">
          <span class="tag-link pill-outer summary-control">
            <span class="count left"><%== tag_counts.length.to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
            <span class="tag">Filter by Tag</span>
            <span class="count right"><%== tag_counts.length.to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
          </span>
        </span>
      </span>
    </summary>

    <ul class="tag-list">
      <% tags.each do |tag| %>
      <li>
        <button type="button" class="tag-link pill-outer" data-tag="<%= tag %>">
          <span class="count left"><%== tag_counts[tag].to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
          <span class="tag <%= tag %>"><%= tag %></span>
          <span class="count right"><%== tag_counts[tag].to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
        </button>
      </li>
      <% end %>
    </ul>
  </details>

  <details id="min-language-filters">
    <summary>
      <span class="tag-list">
        <span class="tag-scroll">
          <span class="tag-link pill-outer summary-control">
            <span class="count left"><%== lanugage_count.to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
            <span class="tag">Filter by Minimum Version of Language</span>
            <span class="count right"><%== lanugage_count.to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
          </span>
        </span>
      </span>
    </summary>

    <ul class="tag-list">
      <% min_ts_versions.each do |min_ts| %>
      <li>
        <button type="button" class="tag-link pill-outer min_lang_link" data-tag="TypeScript >= <%= min_ts %>">
          <span class="count left"><%== min_ts_counts[min_ts].to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
          <span class="tag min-language"><img
                  src="/assets/images/TypeScript.svg"
                  alt="TypeScript >= <%= min_ts %>"
                  class="language typescript"
          >>=&nbsp;v<%= min_ts %></span>
          <span class="count right"><%== min_ts_counts[min_ts].to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
        </button>
      </li>
      <% end %>
      <% min_go_versions.each do |min_go| %>
      <li>
        <button type="button" class="tag-link pill-outer min_lang_link" data-tag="Go >= <%= min_go %>">
          <span class="count left"><%== min_go_counts[min_go].to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
          <span class="tag min-language"><img
                  src="/assets/images/Go.svg"
                  alt="Go >= <%= min_go %>"
                  class="language go"
          >>=&nbsp;v<%= min_go %></span>
          <span class="count right"><%== min_go_counts[min_go].to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
        </button>
      </li>
      <% end %>
      <% min_bash_versions.each do |min_bash| %>
      <li>
        <button type="button" class="tag-link pill-outer min_lang_link" data-tag="Bash >= <%= min_bash %>">
          <span class="count left"><%== min_bash_counts[min_bash].to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
          <span class="tag min-language"><img
                  src="/assets/images/Bash.svg"
                  alt="Bash >= <%= min_bash %>"
                  class="language bash"
          >>=&nbsp;v<%= min_bash %></span>
          <span class="count right"><%== min_bash_counts[min_bash].to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
        </button>
      </li>
      <% end %>
      <% min_rust_versions.each do |min_rust| %>
      <li>
        <button type="button" class="tag-link pill-outer min_lang_link" data-tag="Rust >= <%= min_rust %>">
          <span class="count left"><%== min_rust_counts[min_rust].to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
          <span class="tag min-language"><img
                  src="/assets/images/Rust.svg"
                  alt="Rust >= <%= min_rust %>"
                  class="language rust"
          >>=&nbsp;v<%= min_rust %></span>
          <span class="count right"><%== min_rust_counts[min_rust].to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
        </button>
      </li>
      <% end %>
      <% min_rb_versions[0...2].each do |min_ruby| %>
      <li>
        <button type="button" class="tag-link pill-outer min_lang-link" data-tag="Ruby >= <%= min_ruby %>">
          <span class="count left"><%== min_rb_counts[min_ruby].to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
          <span class="tag min-language"><img
                  src="/assets/images/Ruby.svg"
                  alt="Ruby >= <%= min_ruby %>"
                  class="language ruby"
          >>=&nbsp;v<%= min_ruby %></span>
          <span class="count right"><%== min_rb_counts[min_ruby].to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
        </button>
      </li>
      <% end %>
      <% min_rb_versions[2..].each do |min_ruby| %>
      <li>
        <button type="button" class="tag-link pill-outer min_lang-link" data-tag="Ruby >= <%= min_ruby %>">
          <span class="count left"><%== min_rb_counts[min_ruby].to_s.rjust(2, 'x').gsub('x', '&nbsp;') %></span>
          <span class="tag min-language"><img
                  src="/assets/images/Ruby.svg"
                  alt="Ruby >= <%= min_ruby %>"
                  class="language ruby"
          >>=&nbsp;v<%= min_ruby %></span>
          <span class="count right"><%== min_rb_counts[min_ruby].to_s.ljust(2, 'x').gsub('x', '&nbsp;') %></span>
        </button>
      </li>
      <% end %>
    </ul>
  </details>
</div>

<% # Build a lookup of family metadata from families.yml, keyed by id %>
<% families_by_id = (site.data.families || []).each_with_object({}) { |f, h| h[f['id']] = f } %>

<% # Phase 4: Family Theme - Group projects by family_id %>
<% family_groups = {} %>
<% non_family_projects = [] %>
<% person = site.data.person %>
<% site.data.projects.each do |project| %>
  <% if project['family_id'] %>
    <% family_groups[project['family_id']] ||= [] %>
    <% family_groups[project['family_id']] << project %>
  <% else %>
    <% non_family_projects << project %>
  <% end %>
<% end %>

<% # Sort family members by family_position %>
<% family_groups.each do |family_id, members| %>
  <% family_groups[family_id] = members.sort_by { |p| p['family_position'] || 999 } %>
<% end %>

<% # Order families by their position in families.yml, then merge for rendering %>
<% ordered_families = (site.data.families || []).sort_by { |f| f['position'] || 999 } %>

<% # Merge all projects back together for rendering: person first, then families (in position order), then regular projects %>
<% all_projects_for_rendering = [] %>
<% if person %>
  <% all_projects_for_rendering << { type: :single, project: person.merge("_is_person" => true) } %>
<% end %>
<% ordered_families.each do |family_meta| %>
  <% members = family_groups[family_meta['id']] %>
  <% next unless members && members.any? %>
  <% all_projects_for_rendering << { type: :family, family_id: family_meta['id'], family_name: family_meta['name'], members: members } %>
<% end %>
<% non_family_projects.each do |project| %>
  <% all_projects_for_rendering << { type: :single, project: project } %>
<% end %>

<header>
  <%= render "logos" %>
</header>

<ul class="project-list">
  <% all_projects_for_rendering.each do |item| %>
    <% if item[:type] == :family %>
      <%# Render family stack container %>
      <% family_members = item[:members] %>
      <% primary_project = family_members.find { |p| p['family_primary'] } || family_members.first %>
      <% family_name = item[:family_name] %>
      <% family_id = item[:family_id] %>

      <li class="card-family-stack" data-family-id="<%= family_id %>" data-family-size="<%= family_members.size %>">
        <% family_members.each_with_index do |project, index| %>
          <% # Set up project variables for card rendering %>
          <% raise "Project #{project['name']} has no role!" if project['role'].nil? %>
          <% raise "Project #{project['name']} has invalid role #{project['role']}!" unless allowed_roles.include?(project['role']) %>
          <% year = project['first_commit_by_person_on']&.to_s&.split('/')&.first %>
          <% gh_forge = project["forges"].find { |f| f["type"] == "GitHub" } %>
          <% first_forge = project["forges"].first %>
          <%# Build a reusable list of tags for the card so filtering doesn't rely on visible DOM elements %>
          <% tags_for_card = (project['tags'] || []).dup %>
          <% tags_for_card << project['role'] %>
          <% tags_for_card << year %>
          <% if project['minimum_version'] %>
            <% tags_for_card << "#{project['language']} >= #{project['minimum_version']}" %>
          <% end %>
          <% # Add special filter tags %>
          <% tags_for_card << "adoptable" if project['adoptable'] %>
          <% tags_for_card << "archived" if project['status'] == 'archived' %>
          <% tags_for_card.sort! %>
          <% sorted_tags = (project['tags'] || []).sort %>
      <% aspect_class = project['aspect'].nil? ? '' : "card-#{project['aspect']}" %>
      <% theme_class = project['theme'] ? "theme-#{project['theme']}" : '' %>
      <% archived_class = project['archived'] || project['status'] == 'archived' || project['theme'] == 'avoid-me' ? 'archived' : '' %>

      <div class="card card-in-family <%= aspect_class %> <%= project['role'] %> <%= theme_class %> <%= archived_class %>"
           data-tags='<%= tags_for_card.to_json %>'
           data-theme="family"
           data-family-id="<%= project['family_id'] %>"
           data-family-index="<%= index %>"
           data-is-primary="<%= project['family_primary'] ? 'true' : 'false' %>">
    <div class="corner-anchor fork">
      <% if project['status'] == 'archived' || project['theme'] == 'avoid-me' %>
      <%# Avoid-me projects - Uses caution tape X overlay on card, no corner banner %>
      <% elsif project['adoptable'] || project['theme'] == 'adopt-me' %>
      <%# Adoptable projects - Replace Fork banner with Adopt Me banner %>
      <% adoption_url = project['adoption_url'] || (gh_forge ? "#{gh_forge['url']}/issues" : first_forge['url']) %>
      <a href="<%= adoption_url %>"
         class="corner-banner banner-adopt"
         target="_blank" rel="noopener">
        Adopt&nbsp;<span class="adopt-text">Me</span><span class="adopt-emoji" aria-hidden="true">ü§ù</span>
      </a>
      <% elsif project['theme'] == 'update-me' %>
      <%# THEME: Update Me - Replace Fork banner with Update Me banner %>
      <% update_url = gh_forge ? "#{gh_forge['url']}/issues" : (first_forge ? first_forge['url'] : '#') %>
      <a href="<%= update_url %>"
         class="corner-banner banner-update"
         target="_blank" rel="noopener">
        Update&nbsp;<span class="update-text">Me</span><span class="update-emoji" aria-hidden="true">üîß</span>
      </a>
      <% elsif project["_is_person"] %>
      <a href="<%= gh_forge['url'] %>" class="corner-banner banner-fork" target="_blank" rel="noopener">Follow&nbsp;<span class="fork-me-text">Me</span><span class="fork-me-emoji" aria-hidden="true">üîÆ</span></a>
      <% else %>
      <% if gh_forge %>
      <a href="<%= gh_forge['url'] %>/fork" class="corner-banner banner-fork" target="_blank" rel="noopener">Fork&nbsp;<span class="fork-me-text">Me</span><span class="fork-me-emoji" aria-hidden="true">üîÄ</span></a>
      <% elsif first_forge %>
      <a href="<%= first_forge['url'] %>" class="corner-banner banner-fork" target="_blank" rel="noopener">Clone&nbsp;<span class="fork-me-text">Me</span><span class="fork-me-emoji" aria-hidden="true">üîÄ</span></a>
      <% end %>
      <% end %>
    </div>
    <div class="top-anchor role">
      <div class="horizontal-banner banner-role <%= project['role'] %>">
          <span class="role-label">
            <% if project["_is_person"] %>
            <a href="<%= gh_forge['url'] %>" target="_blank" rel="noopener">Human</a>
            <% else %>
            <% if gh_forge %>
            <% capitalized_role = project['role'].capitalize %>
            <a href="<%= gh_forge['url'] %>/commits?author=pboling" target="_blank" rel="noopener"><%= capitalized_role %></a>
            <% else %>
            <span><%= project['role'].capitalize %></span>
            <% end %>
            <% end %>
            <% if project['first_commit_by_person'] && year %>
            &nbsp;|&nbsp;
            <a href="<%= project['first_commit_by_person'] %>" class="role-start" target="_blank" rel="noopener">since <%= year %></a>
            <% end %>
            <% if project['archived'] && !project['adoptable'] %>
            &nbsp;|&nbsp;
            <span>Archived</span>
            <% end %>
          </span>
      </div>
    </div>
    <% total_stars_for_footer = (project['github_stars'] || 0) + (project['gitlab_stars'] || 0) + (project['codeberg_stars'] || 0) %>
    <% if project['release_date'] || project['total_downloads'] || total_stars_for_footer > 0 %>
    <div class="bottom-anchor stats">
      <div class="horizontal-banner banner-stats <%= project['role'] %>">
        <span class="stats-label">
          <%
            total_dl   = project['total_downloads']
            release_dl = project['release_downloads']
            daily_dl   = project['daily_downloads']
            has_dl     = !!total_dl
          %>
          <% if has_dl %>
          <span class="stat-group dl-group">
            <span class="stat-label">DL</span>
            <span class="stat-sub" title="Total downloads">T:&nbsp;<%== fmt_num.call(total_dl) %></span>
            <% if release_dl %><span class="stat-sub" title="Latest release downloads">R:&nbsp;<%== fmt_num.call(release_dl) %></span><% end %>
            <% if daily_dl %><span class="stat-sub" title="28-day trailing average downloads per day">~<%== fmt_num.call(daily_dl) %>/d</span><% end %>
          </span>
          <% end %>
          <% if total_stars_for_footer > 0 %>
          <% if has_dl %><span class="stat-sep">&nbsp;|&nbsp;</span><% end %>
          <span class="stat-group"><span class="stat-item"><%= total_stars_for_footer %> ‚≠êÔ∏è</span></span>
          <% end %>
          <% if project['release_date'] || project['last_commit_on'] %>
          <% if has_dl || total_stars_for_footer > 0 %><span class="stat-sep">&nbsp;|&nbsp;</span><% end %>
          <% if project['release_date'] %>
          <span class="stat-group"><span class="stat-label">Last Rel</span><span class="stat-item"><%= project['release_date'] %></span></span>
          <% else %>
          <span class="stat-group"><span class="stat-label">Commit</span><span class="stat-item"><%= project['last_commit_on'] %></span></span>
          <% end %>
          <% end %>
        </span>
      </div>
    </div>
    <% end %>
    <h2>
      <% if project["ecosystem"] == "rubygems" %>
      <a href="https://bestgems.org/gems/<%= project['name'] %>" class="project-language gem-link" target="_blank" rel="noopener">
        <img
                src="/assets/images/<%= project['language'] %>.svg"
                alt="<%= project['language'] %>"
                class="language <%= project['language'].downcase %>"
        >
        <%= project["name"] %>
      </a>
      <% else %>
      <span class="project-language">
        <img
                src="/assets/images/<%= project['language'] %>.svg"
                alt="<%= project['language'] %>"
                class="language <%= project['language'].downcase %>"
        >
        <%= project["name"] %>
      </span>
      <% end %>
    </h2>
    <p>
      <% if project['archived'] %>
      <% # No reason to show funding icons for archived projects %>
      <% else %>
      <%# Liberapay is always shown ‚Äî it is the universal fallback funding icon %>
      <a href="https://liberapay.com/pboling" class="funding-link" target="_blank" rel="noopener">
        <img src="/assets/images/Liberapay.svg" alt="Liberapay" class="link-icon funding-site">
      </a>
      <%# Render any project-specific OpenCollective orgs stored in funding_sites %>
      <% Array(project["funding_sites"]).each do |funding_site| %>
      <a href="<%= funding_site['url'] %>" class="funding-link" target="_blank" rel="noopener">
        <img
                src="/assets/images/<%= funding_site['type'] %>.svg"
                alt="<%= funding_site['type'] %> (<%= funding_site['url'] %>)"
                class="link-icon funding-site"
        >
      </a>
      <% end %>
      <% end %>
      <% if !project["docs_site"].nil? %>
      <a href="<%= project['doc_site'] %>" class="doc-link" target="_blank" rel="noopener">
        <img
                src="/assets/images/Read-the-Docs.svg"
                alt="Documentation Website (<%= project['doc_site'] %>)"
                class="link-icon doc-site"
        >
      </a>
      <% end %>
      <% project["forges"].each do |forge| %>
      <a href="<%= forge['url'] %>" class="forge-link" target="_blank" rel="noopener">
        <img
                src="/assets/images/<%= forge['type'] %>.svg"
                alt="forge: <%= forge['type'] %> (<%= forge['url'] %>)"
                class="link-icon forge"
        >
      </a>
      <% end %>
    </p>
    <p>
      <% if !project["minimum_version"].nil? %>
      <span class="tag min-language"><img
              src="/assets/images/<%= project['language'] %>.svg"
              alt="<%= project['language'] %> >= <%= project['minimum_version'] %>"
              class="language <%= project['language'].downcase %>"
      ><%= project["language"] %>&nbsp;>=&nbsp;<%= project["minimum_version"] %></span>
      <% end %>
      <% if project["tags"] && project["tags"].any? %>
      <% sorted_tags.each do |tag| %>
      <span class="tag <%= tag %>"><%= tag %></span>
      <% end %>
      <% else %>
      <% raise "Project #{project['name']} has no tags!" %>
      <% end %>
    </p>
    <% if project['archived'] %>
    <% # No reason to show GitHub stats for archived projects %>
    <% elsif gh_forge %>
    <%# Per-project GitHub badge stats ‚Äî family cards are never the person card %>
    <p>
      <img alt="<%= project['name'] %> GitHub License" src="https://img.shields.io/github/license/<%= gh_forge['owner'] %>/<%= project['name'] %>?style=social">
      <img alt="<%= project['name'] %> GitHub commit activity" src="https://img.shields.io/github/commit-activity/m/<%= gh_forge['owner'] %>/<%= project['name'] %>?style=social">
      <% if project["release_date"] && project["last_commit_on"] %>
      <img alt="<%= project['name'] %> GitHub commits since latest release" src="https://img.shields.io/github/commits-since/<%= gh_forge['owner'] %>/<%= project['name'] %>/latest?style=social">
      <% end %>
    </p>
    <% end %>
    <p><%== project["description"] %></p>
    <% raise "#{project['name']}" if project["funding_sites"].nil? %>
    <% if project['archived'] %>
    <% # No reason to show funding links for archived projects %>
    <p>
      This project is in the to-be-archived queue. It is no longer maintained, so speak up if you use it!
    </p>
    <% else %>
    <%# Always show Liberapay + GitHub Sponsors; prepend any project-specific OC orgs %>
    <% text_funding = Array(project["funding_sites"]).dup %>
    <% text_funding << {"type" => "Liberapay",       "url" => "https://liberapay.com/pboling"} %>
    <% text_funding << {"type" => "GitHub Sponsors", "url" => "https://github.com/sponsors/pboling"} %>
    <p>
      Financially support my work on <em><%= project["name"] %></em> via:
    <% last_comma_index = text_funding.size - 1 %>
    <% text_funding.each_with_index do |funding_site, i| %>
    <% funding_site_class = funding_site['type'].gsub(' ', '-').downcase %>
    <a href="<%= funding_site['url'] %>" class="text-link <%= funding_site_class %>" target="_blank" rel="noopener">
      <% if funding_site['type'] == 'OpenCollective' %>
      <em><%= funding_site['url'].split("/")[-1] %></em>
      <% end %>
      <%= funding_site['type'] %>
    </a><%= i <= last_comma_index - 1 ? ", " : "" %><%= i == last_comma_index - 1 ? "or" : "" %>
    <% end %>
    </p>
    <% end %>

    <% # Add family badge for family-themed cards %>
    <% if project['theme'] == 'family' %>
    <div class="family-badge">
      <span class="family-icon" aria-hidden="true">üè†</span>
      <span class="family-label"><%= family_name %></span>
      <% if project['family_primary'] %>
      <span class="family-count">(<%= family_members.size %> projects)</span>
      <% end %>
    </div>
    <% end %>

          </div>
        <% end %>
      </li>
    <% elsif item[:type] == :single %>
      <%# Render single project card (includes the person card first) %>
      <% project = item[:project] %>
      <% raise "Project #{project['name']} has no role!" if project['role'].nil? %>
      <% raise "Project #{project['name']} has invalid role #{project['role']}!" unless allowed_roles.include?(project['role']) %>
      <% year = project['first_commit_by_person_on']&.to_s&.split('/')&.first %>
      <% gh_forge = project["forges"].find { |f| f["type"] == "GitHub" } %>
      <% first_forge = project["forges"].first %>
      <%# Build a reusable list of tags for the card so filtering doesn't rely on visible DOM elements %>
      <% tags_for_card = (project['tags'] || []).dup %>
      <% tags_for_card << project['role'] %>
      <% tags_for_card << year %>
      <% if project['minimum_version'] %>
        <% tags_for_card << "#{project['language']} >= #{project['minimum_version']}" %>
      <% end %>
      <% # Add special filter tags %>
      <% tags_for_card << "adoptable" if project['adoptable'] %>
      <% tags_for_card << "archived" if project['status'] == 'archived' %>
      <% tags_for_card.sort! %>
      <% sorted_tags = (project['tags'] || []).sort %>
      <% aspect_class = project['aspect'].nil? ? '' : "card-#{project['aspect']}" %>
      <% theme_class = project['theme'] ? "theme-#{project['theme']}" : '' %>
  <% archived_class = project['archived'] || project['status'] == 'archived' || project['theme'] == 'avoid-me' ? 'archived' : '' %>

      <li class="card <%= aspect_class %> <%= project['role'] %> <%= theme_class %> <%= archived_class %>"
          data-tags='<%= tags_for_card.to_json %>'
          <% if project['theme'] %>data-theme="<%= project['theme'] %>"<% end %>>
    <div class="corner-anchor fork">
      <% if project['status'] == 'archived' || project['theme'] == 'avoid-me' %>
      <%# Archived projects - Uses caution tape X overlay on card, no corner banner %>
      <% elsif project['adoptable'] || project['theme'] == 'adopt-me' %>
      <%# Adoptable projects - Replace Fork banner with Adopt Me banner %>
      <% adoption_url = project['adoption_url'] || (gh_forge ? "#{gh_forge['url']}/issues" : first_forge['url']) %>
      <a href="<%= adoption_url %>"
         class="corner-banner banner-adopt"
         target="_blank" rel="noopener">
        Adopt&nbsp;<span class="adopt-text">Me</span><span class="adopt-emoji" aria-hidden="true">ü§ù</span>
      </a>
      <% elsif project['theme'] == 'update-me' %>
      <%# THEME: Update Me %>
      <% update_url = gh_forge ? "#{gh_forge['url']}/issues" : (first_forge ? first_forge['url'] : '#') %>
      <a href="<%= update_url %>"
         class="corner-banner banner-update"
         target="_blank" rel="noopener">
        Update&nbsp;<span class="update-text">Me</span><span class="update-emoji" aria-hidden="true">üîß</span>
      </a>
      <% elsif project["_is_person"] %>
      <a href="<%= gh_forge['url'] %>" class="corner-banner banner-fork" target="_blank" rel="noopener">Follow&nbsp;<span class="fork-me-text">Me</span><span class="fork-me-emoji" aria-hidden="true">üîÆ</span></a>
      <% else %>
      <% if gh_forge %>
      <a href="<%= gh_forge['url'] %>/fork" class="corner-banner banner-fork" target="_blank" rel="noopener">Fork&nbsp;<span class="fork-me-text">Me</span><span class="fork-me-emoji" aria-hidden="true">üîÄ</span></a>
      <% elsif first_forge %>
      <a href="<%= first_forge['url'] %>" class="corner-banner banner-fork" target="_blank" rel="noopener">Clone&nbsp;<span class="fork-me-text">Me</span><span class="fork-me-emoji" aria-hidden="true">üîÄ</span></a>
      <% end %>
      <% end %>
    </div>
    <div class="top-anchor role">
      <div class="horizontal-banner banner-role <%= project['role'] %>">
          <span class="role-label">
            <% if project["_is_person"] %>
            <a href="<%= gh_forge['url'] %>" target="_blank" rel="noopener">Human Programmer</a>
            <% else %>
            <% if gh_forge %>
            <% capitalized_role = project['role'].capitalize %>
            <a href="<%= gh_forge['url'] %>/commits?author=pboling" target="_blank" rel="noopener"><%= capitalized_role %></a>
            <% else %>
            <span><%= project['role'].capitalize %></span>
            <% end %>
            <% end %>
            <% if project['first_commit_by_person'] && year %>
            &nbsp;|&nbsp;
            <% if project['_is_person'] %>
            starting in first grade with BASIC&nbsp;<a href="https://www.c64-wiki.com/wiki/C64-Commands" class="role-start" target="_blank" rel="noopener">v2.0</a>&nbsp;
            and&nbsp;<a href="https://www.c64-wiki.com/wiki/BASIC#Overview_of_BASIC_Version_7.0_Commands" class="role-start" target="_blank" rel="noopener">v7.0</a>&nbsp;
            on the&nbsp;<a href="https://www.c64-wiki.com/wiki/Commodore_128" class="role-start" target="_blank" rel="noopener">Commodore 128</a>
            <% else %>
            <a href="<%= project['first_commit_by_person'] %>" class="role-start" target="_blank" rel="noopener">since <%= year %></a>
            <% end %>
            <% end %>
            <% if project['archived'] %>
            &nbsp;|&nbsp;
            <span>Archived</span>
            <% end %>
          </span>
      </div>
    </div>
    <% total_stars_for_footer = (project['github_stars'] || 0) + (project['gitlab_stars'] || 0) + (project['codeberg_stars'] || 0) %>
    <% if project['release_date'] || project['total_downloads'] || total_stars_for_footer > 0 %>
    <div class="bottom-anchor stats">
      <div class="horizontal-banner banner-stats <%= project['role'] %>">
        <span class="stats-label">
          <%
            total_dl   = project['total_downloads']
            release_dl = project['release_downloads']
            daily_dl   = project['daily_downloads']
            has_dl     = !!total_dl
          %>
          <% if has_dl %>
          <span class="stat-group dl-group">
            <span class="stat-label">DL</span>
            <span class="stat-sub" title="Total downloads">T:&nbsp;<%== fmt_num.call(total_dl) %></span>
            <% if release_dl %><span class="stat-sub" title="Latest release downloads">R:&nbsp;<%== fmt_num.call(release_dl) %></span><% end %>
            <% if daily_dl %><span class="stat-sub" title="28-day trailing average downloads per day">~<%== fmt_num.call(daily_dl) %>/d</span><% end %>
          </span>
          <% end %>
          <% if total_stars_for_footer > 0 %>
          <% if has_dl %><span class="stat-sep">&nbsp;|&nbsp;</span><% end %>
          <span class="stat-group"><span class="stat-item"><%= total_stars_for_footer %>&nbsp;‚≠êÔ∏è</span></span>
          <% end %>
          <% if project['release_date'] || project['last_commit_on'] %>
          <% if has_dl || total_stars_for_footer > 0 %><span class="stat-sep">&nbsp;|&nbsp;</span><% end %>
          <% if project['release_date'] %>
          <span class="stat-group"><span class="stat-label">Rel</span><span class="stat-item"><%= project['release_date'] %></span></span>
          <% else %>
          <span class="stat-group"><span class="stat-label">Commit</span><span class="stat-item"><%= project['last_commit_on'] %></span></span>
          <% end %>
          <% end %>
        </span>
      </div>
    </div>
    <% end %>
    <h2>
      <% if project["ecosystem"] == "rubygems" %>
      <a href="https://bestgems.org/gems/<%= project['name'] %>" class="project-language gem-link" target="_blank" rel="noopener">
        <img
                src="/assets/images/<%= project['language'] %>.svg"
                alt="<%= project['language'] %>"
                class="language <%= project['language'].downcase %>"
        >
        <%= project["name"] %>
      </a>
      <% elsif project["_is_person"] %>
      <a href="<%= project['tech_site'] %>" class="project-language gem-link" target="_blank" rel="noopener">
        <img
                src="/assets/images/<%= project['avatar'] %>"
                alt="It's me"
                class="language"
        >
        <%= project["full_name"] %>
      </a>
      <% else %>
      <span class="project-language">
        <img
                src="/assets/images/<%= project['language'] %>.svg"
                alt="<%= project['language'] %>"
                class="language <%= project['language'].downcase %>"
        >
        <%= project["name"] %>
      </span>
      <% end %>
    </h2>
    <p>
      <% if project['archived'] %>
      <% # No reason to show funding icons for archived projects %>
      <% else %>
      <%# Liberapay is always shown ‚Äî it is the universal fallback funding icon %>
      <a href="https://liberapay.com/pboling" class="funding-link" target="_blank" rel="noopener">
        <img src="/assets/images/Liberapay.svg" alt="Liberapay" class="link-icon funding-site">
      </a>
      <%# Render any project-specific OpenCollective orgs stored in funding_sites %>
      <% Array(project["funding_sites"]).reject {|f| f['type'] == "Liberapay"}.each do |funding_site| %>
      <a href="<%= funding_site['url'] %>" class="funding-link" target="_blank" rel="noopener">
        <img
                src="/assets/images/<%= funding_site['type'] %>.svg"
                alt="<%= funding_site['type'] %> (<%= funding_site['url'] %>)"
                class="link-icon funding-site"
        >
      </a>
      <% end %>
      <% end %>
      <% if !project["docs_site"].nil? %>
      <a href="<%= project['doc_site'] %>" class="doc-link" target="_blank" rel="noopener">
        <img
                src="/assets/images/Read-the-Docs.svg"
                alt="Documentation Website (<%= project['doc_site'] %>)"
                class="link-icon doc-site"
        >
      </a>
      <% end %>
      <% project["forges"].each do |forge| %>
      <a href="<%= forge['url'] %>" class="forge-link" target="_blank" rel="noopener">
        <img
                src="/assets/images/<%= forge['type'] %>.svg"
                alt="forge: <%= forge['type'] %> (<%= forge['url'] %>)"
                class="link-icon forge"
        >
      </a>
      <% end %>
    </p>
    <p>
      <% if !project["minimum_version"].nil? %>
      <span class="tag min-language"><img
              src="/assets/images/<%= project['language'] %>.svg"
              alt="<%= project['language'] %> >= <%= project['minimum_version'] %>"
              class="language <%= project['language'].downcase %>"
      ><%= project["language"] %>&nbsp;>=&nbsp;<%= project["minimum_version"] %></span>
      <% end %>
      <% if project["tags"] && project["tags"].any? %>
      <% sorted_tags.each do |tag| %>
      <span class="tag <%= tag %>"><%= tag %></span>
      <% end %>
      <% else %>
      <% raise "Project #{project['name']} has no tags!" %>
      <% end %>
    </p>
    <% if project['archived'] %>
    <% # No reason to show GitHub stats for archived projects %>
    <% elsif !project["_is_person"] && gh_forge %>
    <%# Per-project GitHub badge stats (not shown on the person card) %>
    <p>
      <img alt="<%= project['name'] %> GitHub License" src="https://img.shields.io/github/license/<%= gh_forge['owner'] %>/<%= project['name'] %>?style=social">
      <img alt="<%= project['name'] %> GitHub commit activity" src="https://img.shields.io/github/commit-activity/m/<%= gh_forge['owner'] %>/<%= project['name'] %>?style=social">
      <% if project["release_date"] && project["last_commit_on"] %>
      <img alt="<%= project['name'] %> GitHub commits since latest release" src="https://img.shields.io/github/commits-since/<%= gh_forge['owner'] %>/<%= project['name'] %>/latest?style=social">
      <% end %>
    </p>
    <% end %>
    <% if project["_is_person"] && project["headshot"] %>
    <div class="person-description">
      <img src="/assets/images/<%= project['headshot'] %>"
           alt="<%= project['name'] %>"
           class="person-headshot">
      <p><%== project["description"] %></p>
      <p><%== project["description2"] %></p>
    </div>
    <% else %>
    <p><%== project["description"] %></p>
    <% end %>
    <% raise "#{project['name']}" if project["funding_sites"].nil? %>
    <% if project['archived'] %>
    <% # No reason to show funding links for archived projects %>
    <p>
      This project is in the to-be-archived queue. It is no longer maintained, so speak up if you use it!
    </p>
    <% else %>
    <%# Always show Liberapay + GitHub Sponsors; prepend any project-specific OC orgs %>
    <% text_funding = Array(project["funding_sites"]).dup %>
    <% text_funding << {"type" => "Liberapay",       "url" => "https://liberapay.com/pboling"} %>
    <% text_funding << {"type" => "GitHub Sponsors", "url" => "https://github.com/sponsors/pboling"} %>
    <p>
      Financially support
      <% if project["_is_person"] %>
      my open source work
      <% else %>
      my work on <em><%= project["name"] %></em>
      <% end %>
      via:
    <% last_comma_index = text_funding.size - 1 %>
    <% text_funding.each_with_index do |funding_site, i| %>
    <a href="<%= funding_site['url'] %>" class="text-link <%= funding_site['type'].gsub(' ', '-').downcase %>" target="_blank" rel="noopener">
      <% if funding_site['type'] == 'OpenCollective' %>
      <em><%= funding_site['url'].split("/")[-1] %></em>
      <% end %>
      <%= funding_site['type'] %>
    </a><%= i <= last_comma_index - 1 ? ", " : "" %><%= i == last_comma_index - 1 ? "or" : "" %>
    <% end %>
    </p>
    <% end %>
      </li>
    <% end %>
  <% end %>
</ul>
